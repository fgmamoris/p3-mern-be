(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),r=c(26),s=c.n(r),o=c(104),i=c(8),l=c(12),d=c(15),u=c(10),j=c.n(u),b=c(13),m=c(9),h=c.n(m),p={authCheckingFinish:"[auth] Finish login state",authLogin:"[auth] Login",authLogout:"[auth] Logut",productCheckingList:"[product] Checking list of products",productAddNew:"[product] Add new",productUpdated:"[product] Product updated",productDeleted:"[product] Product deleted",userCheckingList:"[user] Checking users list",userAddNew:"[user] Add new",userUpdated:"[user] user updated",userDeleted:"[user] user deleted",cartChecking:"[cart] Cart checking",cartUpdated:"[cart] cart updated",cartDeleted:"[cart] cart deleted",updateCart:"[cart] Update product to cart",saleCheckingList:"[sale] Checking sales",saleNew:"[sale] New sale",saleChangeState:"[sale] Change state sale",confirmAction:"[action] Confirm action",removeAction:"[action] Remove action"},x="https://supermarket-b.herokuapp.com/api",O=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(x,"/").concat(e);return"GET"===c?fetch(n):fetch(n,{method:c,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},f=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(x,"/").concat(e),a=localStorage.getItem("token")||"";return"GET"===c?fetch(n,{method:c,headers:{"x-access-token":a}}):fetch(n,{method:c,headers:{"Content-type":"application/json","x-access-token":a},body:JSON.stringify(t)})},v=function(){return{type:p.confirmAction}},g=function(){return{type:p.removeAction}},y=function(e){return Object(b.a)(j.a.mark((function t(){var c,n,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.cloudinary.com/v1_1/dcqudzsce/image/upload",(c=new FormData).append("upload_preset","super_market"),c.append("file",e),t.prev=4,t.next=7,fetch("https://api.cloudinary.com/v1_1/dcqudzsce/image/upload",{method:"POST",body:c});case 7:if(!(n=t.sent).ok){t.next=15;break}return t.next=11,n.json();case 11:return a=t.sent,t.abrupt("return",a.secure_url);case 15:return t.next=17,n.json();case 17:throw t.sent;case 18:t.next=23;break;case 20:throw t.prev=20,t.t0=t.catch(4),t.t0;case 23:case"end":return t.stop()}}),t,null,[[4,20]])})))},k=function(e){return Object(b.a)(j.a.mark((function t(){var c,n,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=(c=(c=e).replace(/^.*[\\\/]/,"")).split("."),n=c[0],t.prev=4,t.next=7,f("image/".concat(n),{},"DELETE");case 7:if(!(a=t.sent).ok){t.next=12;break}return t.abrupt("return",!0);case 12:return t.next=14,a.json();case 14:throw t.sent;case 15:t.next=20;break;case 17:throw t.prev=17,t.t0=t.catch(4),t.t0;case 20:case"end":return t.stop()}}),t,null,[[4,17]])})))},N=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("product",{},"GET");case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,a=n.products.map((function(e){return e})),t(C(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},C=function(e){return{type:p.productCheckingList,payload:e}},w=function(e){return{type:p.productAddNew,payload:e}},_=function(e,t){return function(){var c=Object(b.a)(j.a.mark((function c(n){var a,r,s;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a={name:e.name,tradeMark:e.tradeMark,description:e.description,price:e.price,qty:e.qty,mediaUrl:e.mediaUrl},h.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}}),!t){c.next=9;break}if("https://res.cloudinary.com/dcqudzsce/image/upload/v1613417488/super_market/no-image.png"===a.mediaUrl){c.next=6;break}return c.next=6,n(k(a.mediaUrl));case 6:return c.next=8,n(y(t));case 8:a.mediaUrl=c.sent;case 9:return c.prev=9,c.next=12,f("product/".concat(e._id),a,"PUT");case 12:return r=c.sent,c.next=15,r.json();case 15:(s=c.sent).ok?(n(D(s.productResult)),n(v())):"Token invalid"===s.msg?n(W()):h.a.fire("Error",s.msg,"error"),c.next=22;break;case 19:c.prev=19,c.t0=c.catch(9),console.log(c.t0);case 22:case"end":return c.stop()}}),c,null,[[9,19]])})));return function(e){return c.apply(this,arguments)}}()},D=function(e){return{type:p.productUpdated,payload:e}},E=function(e,t,c){return function(){var n=Object(b.a)(j.a.mark((function n(a){var r,s,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f("product/".concat(e),{},"GET");case 3:return r=n.sent,n.next=6,r.json();case 6:(s=n.sent).ok?(o=s.product,"rest"===c?o.qty=parseInt(o.qty)-parseInt(t):"add"===c&&(o.qty=parseInt(o.qty)+parseInt(t)),a(_(o)),h.a.close()):"Token invalid"===s.msg?a(W()):h.a.fire("Error",s.msg,"error"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},T=function(e){return{type:p.productDeleted,payload:e}},L=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("cart/user",{},"GET");case 3:return c=e.sent,e.next=6,c.json();case 6:(n=e.sent).ok?(a=n.cart,t(P(a))):"Token invalid"===n.msg&&t(W()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},P=function(e){return{type:p.cartChecking,payload:e}},S=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n,a,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("cart/user",{},"GET");case 3:return c=e.sent,e.next=6,c.json();case 6:if(!(n=e.sent).ok){e.next=25;break}return(a=n.cart).products.forEach((function(e){t(E(e.product,e.qtyOrder,"add"))})),e.prev=10,e.next=13,f("cart/".concat(a._id),{},"DELETE");case 13:return r=e.sent,e.next=16,r.json();case 16:(s=e.sent).ok?t(q()):"Token invalid"===s.msg?t(W()):console.log(s.msg),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),console.log(e.t0);case 23:e.next=26;break;case 25:console.log(n.msg);case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(0),console.log(e.t1);case 31:case"end":return e.stop()}}),e,null,[[0,28],[10,20]])})));return function(t){return e.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(c){var n,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("cart/".concat(e),{},"DELETE");case 3:return n=t.sent,t.next=6,n.json();case 6:(a=t.sent).ok?c(q(e)):"Token invalid"===a.msg?c(W()):h.a.fire("Error",a.msg,"error"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},q=function(){return{type:p.cartDeleted}},F=function(e){return console.log("StartSale"),function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("sale",{});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,a=n.sales.map((function(e){return e})),t(U(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},U=function(e){return{type:p.saleCheckingList,payload:e}},A=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(c,n){var a,r,s,o,i,l,d;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h.a.fire({title:"Processing payment",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}}),a=n().auth,r=a.firstName,s=a.lastName,o=n().cart,"cash"!==(i={seller:r+" "+s,products:e.products,client:{fullName:e.fullName,address:e.address,email:e.email?e.email:" "},paymentBreakdown:{paymentMethod:e.paymentMethod,card:e.card?e.card:0,paidDate:e.date},totalAmount:e.totalAmount,state:"active"}).paymentBreakdown.paymentMethod&&(console.log(i.paymentBreakdown.paymentMethod),h.a.fire({title:"Processing payment",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}})),t.prev=5,t.next=8,f("sale/new",i,"POST");case 8:return l=t.sent,t.next=11,l.json();case 11:(d=t.sent).ok?(e._id=d.sale._id,c(B(d.sale)),c(I(o._id)),h.a.fire("Venta confirmada","Se ralizo operaci\xf3n con \xe9xito","success"),c(v())):"Token invalid"===d.msg?c(W()):(console.log(d),h.a.fire("Error",d.msg,"error")),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e,c){return t.apply(this,arguments)}}()},B=function(e){return{type:p.saleNew,payload:e}},V=function(e){return{type:p.saleChangeState,payload:e}},G=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("user",{});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,a=n.users.map((function(e){return e})),t(M(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},M=function(e){return{type:p.userCheckingList,payload:e}},X=function(e){return{type:p.userAddNew,payload:e}},z=function(e){return{type:p.userUpdated,payload:e}},$=function(e){return{type:p.userDeleted,payload:e}},R=function(e){return{type:p.authLogin,payload:e}},H=function(){return{type:p.authCheckingFinish}},W=function(){return function(e,t){localStorage.clear(),e(J()),h.a.fire("Error","Session cerrada","error")}},J=function(){return{type:p.authLogout}},Q=c(64),Y=c.n(Q),Z=function(){return Object(n.jsx)("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(n.jsx)(Y.a,{type:"ThreeDots",color:"#2BAD60",height:"100",width:"100"})})},K=c(11),ee=c(123),te=c(103),ce=c(21),ne=c(7),ae=(c(18),c(96),function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)}),re=function(){var e=Object(i.b)(),t=Object(a.useState)(!1),c=Object(K.a)(t,2),r=c[0],s=c[1],o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),c=Object(K.a)(t,2),n=c[0],r=c[1];return[n,function(e){var t=e.target;r(Object(ne.a)(Object(ne.a)({},n),{},Object(ce.a)({},t.name,t.value)))},function(){r(e)}]}({inputEmail:"",inputPassword:""}),l=Object(K.a)(o,2),d=l[0],u=l[1],m=d.inputEmail,p=d.inputPassword;return Object(n.jsx)("div",{className:"form text-center",style:{height:"100vh"},children:Object(n.jsxs)(ee.a,{className:"form-signin",noValidate:!0,validated:r,onSubmit:function(t){var c,n,a=t.currentTarget;!1===a.checkValidity()?(t.preventDefault(),t.stopPropagation()):!0===a.checkValidity()&&(t.preventDefault(),ae(m)?e((c=m,n=p,function(){var e=Object(b.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth/new",{email:c,password:n},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:(r=e.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(R({uid:r.uid,firstName:r.firstName,lastName:r.lastName,position:r.employeePosition})),"gerente"===r.employeePosition?(t(G()),t(F())):"vendedor"===r.employeePosition&&t(L()),t(N())):h.a.fire("Error",r.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):h.a.fire("Error","El formato del email es incorrecto","error")),s(!0)},children:[Object(n.jsxs)(ee.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)("h1",{className:"h3 mb-3 font-weight-normal ",children:"Login"}),Object(n.jsx)("hr",{}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"inputEmail",onChange:u,placeholder:"Email address",type:"email",required:!0,value:m}),Object(n.jsx)(ee.a.Control.Feedback,{type:"valid",children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Ingrese un nombre v\xe1lido"})]}),Object(n.jsxs)(ee.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(ee.a.Control,{className:"form-control",name:"inputPassword",onChange:u,placeholder:"Password",type:"password",required:!0,value:p,minLength:6}),Object(n.jsx)(ee.a.Control.Feedback,{type:"valid",children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"La contrase\xf1a debe tener al menos 6 caracteres!"})]}),Object(n.jsx)(te.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Sign in"}),Object(n.jsx)("p",{className:"mt-5 mb-3 text-muted",children:"\xa9 2021"})]})})},se=c(126),oe=c(105),ie=c(127),le=c(106),de={qty:"",name:"",tradeMark:"",price:""},ue=function(e){var t=e.history,c=Object(d.h)().id,r=Object(i.c)((function(e){return e.products})).products,s=Object(a.useState)(de),l=Object(K.a)(s,2),u=l[0],j=l[1];return Object(a.useEffect)((function(){if(0!==r.length){var e=r.find((function(e){return e._id===c}));j(e)}}),[r,c]),Object(n.jsx)(o.a,{className:"animate__animated animate__fadeInLeftBig",style:{width:"70%",overflow:"hidden",marginTop:20,marginBottom:20},children:Object(n.jsxs)(se.a,{className:"border-0",children:[Object(n.jsx)("div",{children:u.qty>0?Object(n.jsx)(oe.a,{pill:!0,variant:"success",className:"ml-4",children:"En stock"}):Object(n.jsx)(oe.a,{pill:!0,variant:"danger",className:"ml-4",children:"Sin stock"})}),Object(n.jsx)(se.a.Img,{variant:"top",src:u.mediaUrl,className:"d-flex align-items-center",style:{height:" auto",width:" auto",maxWidth:"300px",maxHeight:"300px",overflow:"hidden",objectFit:"contain",margin:"auto"}}),Object(n.jsx)(se.a.Body,{children:Object(n.jsx)(se.a.Title,{children:Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(ie.a.Item,{children:Object(n.jsx)("h4",{children:u.name})}),Object(n.jsx)(ie.a.Item,{children:Object(n.jsxs)("h6",{children:["Marca: ",u.tradeMark]})}),Object(n.jsx)(ie.a.Item,{children:Object(n.jsxs)("h6",{children:["Descripci\xf3n: ",u.description]})}),Object(n.jsx)(ie.a.Item,{children:Object(n.jsxs)("h6",{className:"text-muted",children:["Precio: $",u.price]})}),Object(n.jsx)(ie.a.Item,{children:Object(n.jsxs)("h6",{className:"text-muted",children:["Stock: ",u.qty]})}),Object(n.jsx)(ie.a.Item,{children:Object(n.jsx)(le.a,{children:Object(n.jsx)(te.a,{variant:"bnt btn-outline-info ml-2",onClick:function(e){e.preventDefault(),t.goBack(),t.length>=2?t.push("/"):t.goBack()},children:"Return"})})})]})})})]})})},je=c(65),be=c(112),me=c(111),he=c(107),pe=c(108),xe=c(109),Oe=c(110),fe=c(122),ve=function(e){var t=e.props,c=Object(a.useState)(!1),r=Object(K.a)(c,2),s=r[0],o=r[1],l=Object(K.a)(t,3),d=l[0],u=l[1],m=l[2],p=function(){return u(!1)},x=Object(a.useState)(0),O=Object(K.a)(x,2),g=O[0],y=O[1],k=Object(i.b)(),N=Object(i.c)((function(e){return e.auth})).uid,C=Object(i.c)((function(e){return e.action})).action,w=Object(i.c)((function(e){return e.cart}));return Object(a.useEffect)((function(){C&&u(!1)}),[C,u]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(fe.a,{show:d,onHide:p,backdrop:"static",children:[Object(n.jsx)(fe.a.Header,{closeButton:!0,children:Object(n.jsx)(fe.a.Title,{children:m.name})}),Object(n.jsxs)(fe.a.Body,{children:[Object(n.jsxs)("p",{children:["Marca: ",m.tradeMark]}),Object(n.jsxs)("p",{children:["Precio por unidad: $ ",m.price]})]}),Object(n.jsx)(fe.a.Footer,{children:Object(n.jsxs)(ee.a,{inline:!0,className:"ml-1",style:{margin:"auto"},onSubmit:function(e){var t=e.currentTarget;!1===t.checkValidity()?(e.preventDefault(),e.stopPropagation()):!0===t.checkValidity()&&(e.preventDefault(),""===w.user?k(function(e,t,c){return function(){var n=Object(b.a)(j.a.mark((function n(a){var r,s,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={user:e,products:[{product:t,qtyOrder:c}]},n.prev=1,n.next=4,f("cart/new",r,"POST");case 4:return s=n.sent,n.next=7,s.json();case 7:(o=n.sent).ok?(r._id=o.cart._id,a(P(o.cart)),a(E(t,c,"rest")),a(v()),h.a.fire("Producto agregado al carro")):"Token invalid"===o.msg?a(W()):h.a.fire("Error",o.msg,"error"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()}(N,m._id,g)):k(function(e,t,c){return function(){var e=Object(b.a)(j.a.mark((function e(n){var a,r,s,o,i,l,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("cart/user",{},"GET");case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).ok){e.next=27;break}return s=r.cart,0===(o=s.products.filter((function(e){return e.product===t}))).length?s.products.push({product:t,qtyOrder:c}):i=s.products.map((function(e){return e.product===t?{product:t,qtyOrder:parseInt(c)+parseInt(e.qtyOrder)}:e})),s.products=0===o.length?s.products:i,e.prev=12,e.next=15,f("cart/".concat(s._id),s,"PUT");case 15:return l=e.sent,e.next=18,l.json();case 18:(d=e.sent).ok?(n(P(d.cart)),n(E(t,c,"rest")),n(v()),h.a.fire("Producto agregado al carro")):"Token invalid"===d.msg?n(W()):h.a.fire("Error",d.msg,"error"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),console.log(e.t0);case 25:e.next=28;break;case 27:"Token invalid"===r.msg&&n(W());case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(0),console.log(e.t1);case 33:case"end":return e.stop()}}),e,null,[[0,30],[12,22]])})));return function(t){return e.apply(this,arguments)}}()}(0,m._id,g))),o(!0)},noValidate:!0,validated:s,children:[Object(n.jsxs)(ee.a.Group,{controlId:"formInputQty",children:[Object(n.jsx)(ee.a.Label,{className:"mr-2",children:"Cantidad:"}),Object(n.jsx)(ee.a.Control,{className:"form-control mr-4",name:"qtyOrder",onChange:function(e){e.preventDefault(),y(e.target.value)},type:"number",min:1,max:m.qty,required:!0,value:g,pattern:"[0-9]*"})]}),Object(n.jsxs)(ee.a.Group,{children:[Object(n.jsx)(te.a,{className:"mr-2 my-1",type:"submit",variant:"success",children:"Agregar"}),Object(n.jsx)(te.a,{variant:"secondary",onClick:p,children:"Cancelar"})]})]})})]})})},ge=function(e){var t=e.product,c=Object(i.c)((function(e){return e.auth})).position,r=Object(i.b)(),s=Object(a.useState)(!1),u=Object(K.a)(s,2),m=u[0],p=u[1],x=Object(d.g)();Object(a.useEffect)((function(){}),[m]);return Object(n.jsxs)(o.a,{className:"animate__animated animate__fadeIn",children:[m&&Object(n.jsx)(ve,{props:[m,p,t]}),Object(n.jsxs)(se.a,{border:"dark",style:{maxWidth:"18rem"},children:[Object(n.jsx)("div",{children:t.qty>0?Object(n.jsx)(oe.a,{pill:!0,variant:"success",className:"ml-1",children:"En stock"}):Object(n.jsx)(oe.a,{pill:!0,variant:"danger",className:"ml-1",children:"Sin stock"})}),Object(n.jsx)(o.a,{className:"d-flex align-items-center ",style:{height:"18rem",width:"100%",overflow:"hidden"},children:Object(n.jsx)(se.a.Img,{variant:"top",src:t.mediaUrl,className:"d-flex align-items-center ",alt:t.code,style:{height:" auto",width:" auto",maxWidth:"300px",maxHeight:"300px",overflow:"hidden",objectFit:"contain",margin:"auto"}})}),Object(n.jsxs)(se.a.Body,{children:[Object(n.jsx)(se.a.Title,{children:t.name}),Object(n.jsx)(se.a.Text,{style:{maxLines:3,maxHeight:50,overflow:"hidden"},children:t.tradeMark}),Object(n.jsxs)("small",{className:"text-muted",children:["C\xf3digo: $",t.code]}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{className:"text-muted",children:["Precio: $",t.price]}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{className:"text-muted",children:["Stock: ",t.qty]})]}),Object(n.jsx)(se.a.Footer,{className:"text-muted",children:Object(n.jsxs)(le.a,{className:"d-flex justify-content-end",children:["vendedor"===c&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(l.b,{to:"./product/detail/".concat(t._id),children:Object(n.jsx)(te.a,{variant:"primary",className:"mr-2 ml-auto",children:Object(n.jsx)(he.a,{})})}),t.qty>0&&Object(n.jsx)(te.a,{variant:"light",className:"mr-2 ml-2",onClick:function(e){e.preventDefault(),p(!m)},children:Object(n.jsx)(pe.a,{})})]}),"gerente"===c&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(l.b,{to:"../product/".concat(t._id),children:Object(n.jsx)(te.a,{variant:"secondary",className:"mr-2 ml-2",children:Object(n.jsx)(xe.a,{})})}),Object(n.jsx)(te.a,{variant:"danger",className:"mr-2 ml-2",onClick:function(){h.a.fire({title:"Desea eliminar el producto:",text:"C\xf3digo: ".concat(t.code,", Nombre: ").concat(t.name),showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar"}).then((function(e){var c;e.value&&(r((c=t._id,function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n().products.products,r=a.find((function(e){return e._id===c})),e.prev=2,h.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen:function(){h.a.showLoading()}}),"https://res.cloudinary.com/dcqudzsce/image/upload/v1613417488/super_market/no-image.png"===r.mediaUrl){e.next=7;break}return e.next=7,t(k(r.mediaUrl));case 7:return e.next=9,f("product/".concat(c),{},"Delete");case 9:return s=e.sent,e.next=12,s.json();case 12:(o=e.sent).ok?(t(T(c)),t(v()),h.a.close(),h.a.fire("Acci\xf3n confirmada","Producto eliminado con \xe9xito","success")):"Token invalid"===o.msg?t(W()):h.a.fire("Error",o.msg,"error"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,c){return e.apply(this,arguments)}}())),x.push("/products"))}))},children:Object(n.jsx)(Oe.a,{})})]})]})})]})]})},ye=function(){var e=Object(i.c)((function(e){return e.auth})).position,t=Object(i.c)((function(e){return e.products})).products,c=Object(i.b)(),r=Object(i.c)((function(e){return e.action})).action;return Object(a.useEffect)((function(){r&&c(g())}),[t,r,c]),Object(n.jsx)("div",{children:Object(n.jsx)(je.a,{className:"col-lg-12",children:Object(n.jsxs)(o.a,{className:"my-3",children:["gerente"===e&&Object(n.jsx)(l.b,{to:"./product",children:Object(n.jsx)(te.a,{className:"my-3",variant:"outline-secondary",children:Object(n.jsx)(me.a,{})})}),Object(n.jsx)("hr",{}),Object(n.jsx)(be.a,{children:t.map((function(e){return Object(n.jsx)(ge,{product:e},e._id)}))})]})})})},ke=c(124),Ne=c(125),Ce=c(113),we=c(114),_e=function(){var e=Object(d.g)(),t=Object(i.b)(),c=Object(i.c)((function(e){return e.auth})),a=c.firstName,r=c.position,s=Object(i.c)((function(e){return e.cart}));return Object(n.jsxs)(ke.a,{bg:"dark",variant:"dark",children:[Object(n.jsx)(ke.a.Brand,{children:"SuperMarket"}),Object(n.jsxs)(Ne.a,{className:"mr-auto",children:["gerente"===r&&Object(n.jsx)(l.c,{className:"nav-item nav-link",exact:!0,to:"/users",children:"Usuarios"}),Object(n.jsx)(l.c,{className:"nav-item nav-link",exact:!0,to:"/products",children:"Productos"}),"gerente"===r&&Object(n.jsx)(l.c,{className:"nav-item nav-link",exact:!0,to:"/sales",children:"Ventas"}),"gerente"!==r&&0!==s.products.length&&Object(n.jsx)(l.c,{className:"nav-item nav-link",exact:!0,to:"/shop",children:Object(n.jsx)(Ce.a,{})})]}),Object(n.jsx)(Ne.a.Item,{className:"ml-auto",children:Object(n.jsxs)(l.c,{style:{color:"burlywood",justifyItems:"center"},className:"nav-item nav-link",exact:!0,to:"/shop",children:[Object(n.jsx)(we.a,{style:{color:"burlywood",justifyItems:"flex",margin:"auto"}}),a]})}),Object(n.jsx)(te.a,{variant:"outline-success ml-sm-4",onClick:function(c){c.preventDefault(),t(W()),e.replace("/login")},children:"Logout"})]})},De=c(117),Ee=function(){return Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"Usuario"})}),Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"Correo electr\xf3nico"})}),Object(n.jsx)("th",{className:"text-center",children:Object(n.jsx)("span",{children:"Puesto"})}),Object(n.jsx)("th",{className:"text-center",children:Object(n.jsx)("span",{children:"Acci\xf3n"})})]})})},Te=c(115),Le=(c(34),function(e){var t=e.uid,c=e.handleShowDelete;return Object(n.jsxs)("td",{style:{width:"20%"},className:"text-center",children:[Object(n.jsx)(te.a,{variant:"danger",className:"mr-2 ml-2",onClick:c,children:Object(n.jsx)(Oe.a,{})}),Object(n.jsx)(l.b,{to:"../user/".concat(t),children:Object(n.jsx)(te.a,{variant:"secondary",className:"mr-2 ml-2",children:Object(n.jsx)(xe.a,{})})})]})}),Pe=function(e){var t=e.user,c=Object(i.b)();return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{style:{width:"25em"},children:[Object(n.jsx)(Te.a,{src:t.mediaUrl,alt:"",className:"card-columns animate__animated animate__fadeIn",style:{width:"50px",height:"50px"}}),Object(n.jsx)("span",{className:"user-link",children:t.firstName+" "+t.lastName})]}),Object(n.jsx)("td",{className:"text-center",style:{width:"20em"},children:Object(n.jsx)("span",{className:"user-subhead ",children:t.email})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.employeePosition})}),Object(n.jsx)(Le,{uid:t._id,handleShowDelete:function(e){e.preventDefault(),h.a.fire({title:"Desea eliminar el usuario:",text:"".concat(t.firstName+" "+t.lastName),showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar"}).then((function(e){var n;e.value&&c((n=t._id,function(){var e=Object(b.a)(j.a.mark((function e(t,c){var a,r,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c().users.users,r=a.find((function(e){return e._id===n})),e.prev=2,h.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}}),"https://res.cloudinary.com/dcqudzsce/image/upload/v1613417488/super_market/no-image.png"===r.mediaUrl){e.next=7;break}return e.next=7,t(k(r.mediaUrl));case 7:return e.next=9,f("user/".concat(n),{},"DELETE");case 9:return s=e.sent,e.next=12,s.json();case 12:(o=e.sent).ok?(t($(n)),t(v()),h.a.close(),h.a.fire("Acci\xf3n confirmada","Usuario eliminado con \xe9xito","success")):"Token invalid"===o.msg?t(W()):h.a.fire("Error",o.msg,"error"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,c){return e.apply(this,arguments)}}()))}))}})]})},Se=c(116),Ie=function(){var e=Object(i.c)((function(e){return e.users})).users,t=Object(i.b)(),c=Object(i.c)((function(e){return e.action})).action;return Object(a.useEffect)((function(){c&&t(g())}),[e,c,t]),Object(n.jsx)("div",{children:Object(n.jsx)(o.a,{children:Object(n.jsxs)(le.a,{children:[Object(n.jsx)(le.a,{className:"mx-3",children:Object(n.jsx)(l.b,{to:"./user",children:Object(n.jsx)(te.a,{className:"btn-block my-3",variant:"outline-secondary",children:Object(n.jsx)(Se.a,{})})})}),Object(n.jsx)(je.a,{className:"col-lg-12",children:Object(n.jsx)("div",{className:"main-box clearfix",children:Object(n.jsxs)(De.a,{responsive:"sm",className:"table user-list",children:[Object(n.jsx)(Ee,{}),Object(n.jsx)("tbody",{data:e,children:e.map((function(e){return Object(n.jsx)(Pe,{user:e},e._id)}))})]})})})]})})})},qe=c(119),Fe=c(118),Ue=c.p+"static/media/no-image.20962552.png",Ae=function(e){var t=e.avatar,c=e.setAvatar,r=e.imgUrl,s=Object(a.useState)(),o=Object(K.a)(s,2),i=o[0],l=o[1],d=function(e){e.preventDefault(),e.target.files[0]&&(c(e.target.files[0]),l(URL.createObjectURL(e.target.files[0])))},u=function(e){document.querySelector("#fileSelector").click()};return Object(a.useEffect)((function(){l(""===r?Ue:r)}),[r]),Object(n.jsx)(n.Fragment,{children:null===t?Object(n.jsxs)("div",{children:[Object(n.jsx)(Te.a,{src:i,roundedCircle:!0,style:{maxHeight:"13em",maxWidth:"13em"}}),Object(n.jsx)("input",{id:"fileSelector",type:"file",name:"file",style:{display:"none"},onChange:d}),Object(n.jsx)(Fe.a,{style:{marginLeft:"-3.5em",marginTop:"10em",position:"absolute",cursor:"pointer"},name:"ref",onClick:u,size:40})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)(Te.a,{src:i,roundedCircle:!0,style:{height:"205px",width:"205px",maxHeight:"13em",maxWidth:"13em"}}),Object(n.jsx)("input",{id:"fileSelector",type:"file",name:"file",style:{display:"none"},onChange:d}),Object(n.jsx)(Fe.a,{style:{marginLeft:"-3.5em",marginTop:"10em",position:"absolute",cursor:"pointer"},name:"ref",onClick:u,size:40})]})})},Be={firstName:"",lastName:"",password:"",email:"",employeePosition:"",mediaUrl:""},Ve=function(){var e=Object(d.g)(),t=Object(i.b)(),c=Object(d.h)().id,r=Object(i.c)((function(e){return e.users})).users,s=Object(i.c)((function(e){return e.action})).action,l=Object(a.useState)(!1),u=Object(K.a)(l,2),m=u[0],p=u[1],x=Object(a.useState)(null),O=Object(K.a)(x,2),N=O[0],C=O[1],w=Object(a.useState)(Be),_=Object(K.a)(w,2),D=_[0],E=_[1],T=D.firstName,L=D.lastName,P=D.email,S=D.password,I=D.employeePosition,q=(D.mediaUrl,function(e){var t=e.target;E(Object(ne.a)(Object(ne.a)({},D),{},Object(ce.a)({},t.name,t.value)))});return Object(a.useEffect)((function(){if(c&&0!==r.length){var n=r.find((function(e){return e._id===c}));n.password="",console.log(n),E(n)}else E(Be);s&&(t(g()),e.push("/")),console.log(N)}),[s,e,t,c,r,N]),Object(n.jsx)(o.a,{className:"mx-auto my-3",children:Object(n.jsx)(je.a,{className:"col-8",style:{alignItems:"center",alignContent:"center",justifyContent:"center",justifyItems:"center",margin:"auto"},children:Object(n.jsxs)(ee.a,{validated:m,onSubmit:function(e){var n=e.currentTarget;!1===n.checkValidity()?(e.preventDefault(),e.stopPropagation()):!0===n.checkValidity()&&(e.preventDefault(),ae(P)?t(c?function(e,t){return function(){var c=Object(b.a)(j.a.mark((function c(n){var a,r,s;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password,employeePosition:e.employeePosition,mediaUrl:e.mediaUrl},h.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}}),!t){c.next=9;break}if("https://res.cloudinary.com/dcqudzsce/image/upload/v1613417488/super_market/no-image.png"===a.mediaUrl){c.next=6;break}return c.next=6,n(k(a.mediaUrl));case 6:return c.next=8,n(y(t));case 8:a.mediaUrl=c.sent;case 9:return c.prev=9,c.next=12,f("user/".concat(e._id),a,"PUT");case 12:return r=c.sent,c.next=15,r.json();case 15:(s=c.sent).ok?(n(z(s.user)),n(v()),h.a.fire("Acci\xf3n confirmada","Usuario modificado con \xe9xito","success")):"Token invalid"===s.msg?n(W()):h.a.fire("Error",s.msg,"error"),c.next=22;break;case 19:c.prev=19,c.t0=c.catch(9),console.log(c.t0);case 22:case"end":return c.stop()}}),c,null,[[9,19]])})));return function(e){return c.apply(this,arguments)}}()}(D,N):function(e,t){return function(){var c=Object(b.a)(j.a.mark((function c(n){var a,r,s;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password,employeePosition:e.employeePosition,mediaUrl:e.mediaUrl},h.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}}),!t){c.next=8;break}return c.next=5,n(y(t));case 5:a.mediaUrl=c.sent,c.next=9;break;case 8:a.mediaUrl="https://res.cloudinary.com/dcqudzsce/image/upload/v1613417488/super_market/no-image.png";case 9:return c.prev=9,c.next=12,f("user/new",a,"POST");case 12:return r=c.sent,c.next=15,r.json();case 15:(s=c.sent).ok?(a._id=s.uid,n(X(a)),n(v()),h.a.fire("Acci\xf3n confirmada","Usuario agregado con \xe9xito","success")):"Email already registered"===s.msg?h.a.fire("Error",s.msg,"error"):"Token invalid"===s.msg&&n(W()),c.next=22;break;case 19:c.prev=19,c.t0=c.catch(9),console.log(c.t0);case 22:case"end":return c.stop()}}),c,null,[[9,19]])})));return function(e){return c.apply(this,arguments)}}()}(D,N)):h.a.fire("Error","El formato del email es incorrecto","error"),p(!0))},children:[Object(n.jsx)("div",{children:Object(n.jsx)(je.a,{className:"d-flex justify-content-center",style:{height:"230px"},children:Object(n.jsx)(Ae,{avatar:N,setAvatar:C,imgUrl:D.mediaUrl,handleInputChange:q})})}),Object(n.jsxs)(le.a,{children:[Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom01",children:[Object(n.jsx)(ee.a.Label,{children:"Nombre usuario"}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"firstName",onChange:q,placeholder:"Nombre",type:"text",required:!0,value:T,minLength:4}),Object(n.jsx)(ee.a.Control.Feedback,{children:"Valido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Ingrese un nombre v\xe1lido"})]}),Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom02",children:[Object(n.jsx)(ee.a.Label,{children:"Apellido usuario"}),Object(n.jsx)(ee.a.Control,{name:"lastName",onChange:q,placeholder:"Apellido",type:"text",required:!0,value:L,minLength:4}),Object(n.jsx)(ee.a.Control.Feedback,{children:"Valido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Ingrese un apellido v\xe1lido"})]}),Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom03",children:[Object(n.jsx)(ee.a.Label,{children:"Correo electr\xf3nico"}),Object(n.jsxs)(qe.a,{children:[Object(n.jsx)(qe.a.Prepend,{children:Object(n.jsx)(qe.a.Text,{id:"inputGroupPrepend",children:"@"})}),Object(n.jsx)(ee.a.Control,{name:"email",onChange:q,placeholder:"Correo electr\xf3nico",type:"email",required:!0,"aria-describedby":"inputGroupPrepend",value:P}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Ingrese un correo electr\xf3nico v\xe1lido"})]})]}),Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom04",children:[Object(n.jsx)(ee.a.Label,{children:"Password"}),Object(n.jsx)(ee.a.Control,{name:"password",onChange:q,placeholder:"Contrase\xf1a",type:"text",required:!0,"aria-describedby":"inputGroupPrepend",value:S,minLength:6}),Object(n.jsx)(ee.a.Control.Feedback,{children:"Valido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"La contrase\xf1a debe tener al menos 6 caracteres"})]}),Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom05",children:[Object(n.jsx)(ee.a.Label,{children:"Puesto"}),Object(n.jsxs)(ee.a.Control,{required:!0,as:"select",type:"select",name:"employeePosition",md:3,onChange:q,onSelect:q,value:I,children:[Object(n.jsx)("option",{value:"",children:"Seleccionar una opci\xf3n"}),[{label:"Gerente",value:"gerente"},{label:"Vendedor",value:"vendedor"}].map((function(e){return Object(n.jsx)("option",{value:e.value,children:e.label},e.value)}))]}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe seleccionar un puesto para el empleado."})]})]}),Object(n.jsx)(te.a,{type:"submit",children:"Submit form"})]})})})},Ge=(c(99),{name:"",tradeMark:"",description:"",price:"",qty:"",mediaUrl:""}),Me=function(e){var t=e.history,c=Object(d.h)().id,r=Object(i.b)(),s=Object(i.c)((function(e){return e.products})).products,l=Object(i.c)((function(e){return e.action})).action,u=Object(a.useState)(!1),m=Object(K.a)(u,2),p=m[0],x=m[1],O=Object(a.useState)(null),k=Object(K.a)(O,2),N=k[0],C=k[1],D=Object(a.useState)(Ge),E=Object(K.a)(D,2),T=E[0],L=E[1],P=T.name,S=T.tradeMark,I=T.description,q=T.price,F=T.qty,U=function(e){var t=e.target;console.log(t),L(Object(ne.a)(Object(ne.a)({},T),{},Object(ce.a)({},t.name,t.value)))};return Object(a.useEffect)((function(){if(c&&0!==s.length){var e=s.find((function(e){return e._id===c}));L(e)}else L(Ge);l&&(h.a.close(),h.a.fire("Acci\xf3n confirmada","Producto modificado con \xe9xito","success"),r(g()),t.push("/products"))}),[l,t,r,c,s]),Object(n.jsx)(o.a,{className:"mx-auto my-3",children:Object(n.jsx)(je.a,{className:"col-8",style:{alignItems:"center",alignContent:"center",justifyContent:"center",justifyItems:"center",margin:"auto"},children:Object(n.jsxs)(ee.a,{validated:p,onSubmit:function(e){var t=e.currentTarget;!1===t.checkValidity()?(e.preventDefault(),e.stopPropagation()):!0===t.checkValidity()&&(e.preventDefault(),r(c?_(T,N):function(e,t){return function(){var c=Object(b.a)(j.a.mark((function c(n){var a,r,s;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a={name:e.name,tradeMark:e.tradeMark,description:e.description,price:e.price,qty:e.qty,mediaUrl:e.mediaUrl},h.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}}),!t){c.next=8;break}return c.next=5,n(y(t));case 5:a.mediaUrl=c.sent,c.next=9;break;case 8:a.mediaUrl="https://res.cloudinary.com/dcqudzsce/image/upload/v1613417488/super_market/no-image.png";case 9:return c.prev=9,c.next=12,f("product/new",a,"POST");case 12:return r=c.sent,c.next=15,r.json();case 15:(s=c.sent).ok?(a._id=s.product._id,a.code=s.product.code,n(w(a)),n(v()),h.a.fire("Acci\xf3n confirmada","Producto agregado con \xe9xito","success")):"Token invalid"===s.msg?n(W()):h.a.fire("Error",s.msg,"error"),c.next=22;break;case 19:c.prev=19,c.t0=c.catch(9),console.log(c.t0);case 22:case"end":return c.stop()}}),c,null,[[9,19]])})));return function(e){return c.apply(this,arguments)}}()}(T,N))),x(!0)},children:[Object(n.jsx)("div",{children:Object(n.jsx)(je.a,{className:"d-flex justify-content-center",style:{height:"230px"},children:Object(n.jsx)(Ae,{avatar:N,setAvatar:C,imgUrl:T.mediaUrl,handleInputChange:U})})}),Object(n.jsxs)(le.a,{children:[Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom01",children:[Object(n.jsx)(ee.a.Label,{children:"Nombre del producto"}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"name",onChange:U,placeholder:"Nombre",type:"text",required:!0,value:P,minLength:3,maxLength:18}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe ingresar un nombre v\xe1lido!"})]}),Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom01",children:[Object(n.jsx)(ee.a.Label,{children:"Marca"}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"tradeMark",onChange:U,placeholder:"Marca",type:"text",required:!0,value:S,minLength:4}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe ingresar una marca!"})]}),Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom01",children:[Object(n.jsx)(ee.a.Label,{children:"Descripci\xf3n"}),Object(n.jsx)(ee.a.Control,{as:"textarea",rows:4,className:"form-control",name:"description",onChange:U,placeholder:"Descripci\xf3n del producto",type:"text",value:I})]}),Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom01",children:[Object(n.jsx)(ee.a.Label,{children:"Stock"}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"qty",onChange:U,type:"text",required:!0,value:F,placeholder:"Stock",pattern:"[0-9]*"}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe ingresar una cantidad v\xe1lida!"})]}),Object(n.jsxs)(ee.a.Group,{as:je.a,md:"12",controlId:"validationCustom01",children:[Object(n.jsx)(ee.a.Label,{children:"Precio"}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"price",onChange:U,placeholder:"Precio",type:"number",required:!0,value:q,min:.01,step:.01}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe ingresar una precio v\xe1lido!"})]})]}),Object(n.jsx)(te.a,{type:"submit",children:"Registrar"})]})})})},Xe=function(){return Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"N\xfamero"})}),Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"Vendedor"})}),Object(n.jsx)("th",{className:"text-center",children:Object(n.jsx)("span",{children:"Cliente"})}),Object(n.jsx)("th",{className:"text-center",children:Object(n.jsx)("span",{children:"Fecha"})}),Object(n.jsx)("th",{className:"text-center",children:Object(n.jsx)("span",{children:"Total $"})}),Object(n.jsx)("th",{className:"text-center",children:Object(n.jsx)("span",{children:"Estado"})}),Object(n.jsx)("th",{className:"text-center",children:Object(n.jsx)("span",{children:"Factura"})})]})})},ze=function(e){var t=e._id,c=e.handleShowDelete;return Object(n.jsxs)("td",{style:{width:"15%"},className:"text-center",children:[Object(n.jsx)(te.a,{variant:"danger",className:"mr-1",onClick:c,children:Object(n.jsx)(Oe.a,{})}),Object(n.jsx)(l.b,{to:"./sales/".concat(t),children:Object(n.jsx)(te.a,{variant:"primary",className:"mr-1",children:Object(n.jsx)(he.a,{})})})]})},$e=function(e){var t=e.sale,c=Object(i.b)();return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"text-center",children:Object(n.jsxs)("span",{children:["# ",t.code]})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.seller})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.client.fullName})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.paymentBreakdown.paidDate.substring(0,10)})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.totalAmount})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:"active"===t.state?"Confirmada":"Cancelada"})}),Object(n.jsx)(ze,{_id:t._id,handleShowDelete:function(e){e.preventDefault(),h.a.fire({title:"Desea cancelar la venta",text:"Factura: #".concat(t.code),showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then((function(e){var n;e.value&&c((n=t._id,function(){var e=Object(b.a)(j.a.mark((function e(t){var c,a,r,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}}),e.prev=1,e.next=4,f("sale/".concat(n),{},"GET");case 4:return c=e.sent,e.next=7,c.json();case 7:if(!(a=e.sent).ok){e.next=26;break}return(r=a.sale).state="inactive",console.log(r),e.prev=12,e.next=15,f("sale/".concat(n),r,"PUT");case 15:return s=e.sent,e.next=18,s.json();case 18:o=e.sent,console.log(o),o.ok?(t(V(o.sale)),t(v()),h.a.fire("Acci\xf3n confirmada","Venta cancelada","success")):"Token invalid"===o.msg&&t(W()),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),console.log(e.t0);case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),console.log(e.t1);case 31:case"end":return e.stop()}}),e,null,[[1,28],[12,23]])})));return function(t){return e.apply(this,arguments)}}()))}))}})]})},Re=function(){var e=Object(i.c)((function(e){return e.sales})).sales,t=Object(i.c)((function(e){return e.action})).action,c=Object(i.b)();return Object(a.useEffect)((function(){t&&c(g())}),[e,t,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)(o.a,{className:"container mt-2 text-center",children:Object(n.jsx)("h4",{className:"text-muted",children:"Ventas realizadas"})}),Object(n.jsx)(o.a,{className:"container mb-4",children:Object(n.jsx)(je.a,{className:"col-lg-12",children:Object(n.jsx)("div",{className:"main-box clearfix",children:Object(n.jsxs)(De.a,{responsive:"sm",className:"table user-list",children:[Object(n.jsx)(Xe,{}),Object(n.jsx)("tbody",{data:e,children:e.map((function(e){return Object(n.jsx)($e,{sale:e},e._id)}))})]})})})})]})},He=function(){return Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("strong",{children:"C\xf3digo"})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("strong",{children:"Producto"})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("strong",{children:"Precio"})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("strong",{children:"Cantidad"})}),Object(n.jsx)("td",{className:"text-right",children:Object(n.jsx)("strong",{children:"Total"})})]})})},We=function(e){var t=e.product;return console.log(t),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"text-center",children:Object(n.jsxs)("span",{children:["# ",t.code]})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.name})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.price})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.qty})}),Object(n.jsx)("td",{className:"text-center",children:Object(n.jsx)("span",{children:t.amountProduct})})]})},Je=function(){var e=Object(d.h)().id,t=Object(i.c)((function(e){return e.sales})).sales,c=Object(a.useState)(" "),r=Object(K.a)(c,2),s=r[0],l=r[1];return Object(a.useEffect)((function(){if(0!==t.length){var c=t.find((function(t){return t._id===e}));l(c)}}),[l,t,e]),Object(n.jsxs)(o.a,{className:"border mt-2",children:[Object(n.jsx)(le.a,{children:Object(n.jsxs)(je.a,{className:"col-xs-12",children:[Object(n.jsx)("h3",{children:"Factura"})," "!==s&&Object(n.jsxs)("h6",{children:["# ",s.code]}),Object(n.jsx)("hr",{})," "!==s&&Object(n.jsxs)(le.a,{children:[Object(n.jsxs)(je.a,{className:"col-xs-6",children:[Object(n.jsx)("strong",{children:"Cliente"}),Object(n.jsx)("br",{}),s.client.fullName,Object(n.jsx)("br",{}),s.client.email,Object(n.jsx)("br",{}),s.client.address]}),Object(n.jsxs)(je.a,{className:"col-xs-6 text-right",children:[Object(n.jsx)("strong",{children:"Vendedor"}),Object(n.jsx)("br",{}),s.seller,Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]})]})," "!==s&&Object(n.jsxs)(le.a,{children:[Object(n.jsxs)(je.a,{className:"col-xs-6",children:[Object(n.jsx)("strong",{children:"cash"===s.paymentBreakdown.paymentMethod?"Efectivo":"crediCard"===s.paymentBreakdown.paymentMethod?"Tarjeta de cr\xe9dito":"Tarjeta de d\xe9bito"}),Object(n.jsx)("br",{}),"cash"!==s.paymentBreakdown.paymentMethod?s.paymentBreakdown.card:" ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsxs)(je.a,{className:"col-xs-6 text-right",children:[Object(n.jsx)("strong",{children:"Fecha de venta"}),Object(n.jsx)("br",{}),s.paymentBreakdown.paidDate.substring(0,10),Object(n.jsx)("br",{})]})]})]})}),Object(n.jsx)(le.a,{children:Object(n.jsx)(je.a,{className:"col-md-12",children:Object(n.jsxs)("div",{className:"panel panel-default",children:[Object(n.jsx)("div",{className:"panel-heading",children:Object(n.jsx)("h5",{className:"panel-title",children:Object(n.jsx)("strong",{children:"Detalle"})})}),Object(n.jsx)("div",{className:"panel-body",children:Object(n.jsx)("div",{className:"table-responsive",children:Object(n.jsxs)(De.a,{className:"table table-condensed",children:[Object(n.jsx)(He,{})," "!==s&&Object(n.jsxs)("tbody",{data:s.products,children:[s.products.map((function(e){return Object(n.jsx)(We,{product:e},e._id)})),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"no-line"}),Object(n.jsx)("td",{className:"no-line"}),Object(n.jsx)("td",{className:"no-line"}),Object(n.jsx)("td",{className:"no-line text-center",children:Object(n.jsx)("strong",{children:"Total"})}),Object(n.jsxs)("td",{className:"no-line text-center",children:["$ ",s.totalAmount]})]})]})]})})})]})})})]})},Qe=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(_e,{}),Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/users",component:Ie}),Object(n.jsx)(d.b,{exact:!0,path:"/user/:id",component:Ve}),Object(n.jsx)(d.b,{exact:!0,path:"/user",component:Ve}),Object(n.jsx)(d.b,{exact:!0,path:"/products",component:ye}),Object(n.jsx)(d.b,{exact:!0,path:"/product/detail/:id",component:ue}),Object(n.jsx)(d.b,{exact:!0,path:"/product/:id",component:Me}),Object(n.jsx)(d.b,{exact:!0,path:"/product/",component:Me}),Object(n.jsx)(d.b,{exact:!0,path:"/sales",component:Re}),Object(n.jsx)(d.b,{exact:!0,path:"/sales/:id",component:Je}),Object(n.jsx)(d.a,{to:"/users"})]})]})},Ye=c(121),Ze=c(120),Ke=function(){return Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",className:"text-center",children:"C\xf3digo"}),Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"Producto"})}),Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"Marca"})}),Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"Cantidad"})}),Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"Precio unitario"})}),Object(n.jsx)("th",{scope:"col",className:"text-center",children:Object(n.jsx)("span",{children:"Quitar item"})})]})})},et=function(e){var t=e.product,c=Object(i.c)((function(e){return e.products})).products,r=Object(i.c)((function(e){return e.cart})),s=Object(i.c)((function(e){return e.action})).action,o=Object(i.b)(),l=c.filter((function(e){return e._id===t.product&&e}))[0];return Object(a.useEffect)((function(){s&&o(g())}),[o,s]),Object(n.jsx)(n.Fragment,{children:!!l&&Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{className:"text-center",children:["# ",l.code]}),Object(n.jsx)("td",{className:"text-center",children:l.name}),Object(n.jsx)("td",{className:"text-center",children:l.tradeMark}),Object(n.jsx)("td",{className:"text-center",children:t.qtyOrder}),Object(n.jsxs)("td",{className:"text-right",children:["$ ",l.price]}),Object(n.jsx)("td",{className:"text-right",children:Object(n.jsx)(te.a,{className:"btn btn-sm btn-danger",onClick:function(e){h.a.fire({title:"Desea eliminar el producto:",text:"C\xf3digo: ".concat(l.code,", Nombre: ").concat(l.name),showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar"}).then((function(c){c.value&&(e.preventDefault(),1===r.products.length?o(S()):o(function(e){var t=e._id,c=e.qtyOrder;return function(){var e=Object(b.a)(j.a.mark((function e(n){var a,r,s,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("cart/user",{},"GET");case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).ok){e.next=25;break}return(s=r.cart).products=s.products.filter((function(e){return e.product!==t})),e.prev=10,e.next=13,f("cart/".concat(s._id),s,"PUT");case 13:return o=e.sent,e.next=16,o.json();case 16:(i=e.sent).ok?(n(P(i.cart)),n(E(t,c,"add")),n(v())):"Token invalid"===i.msg?n(W()):h.a.fire("Error",i.msg,"error"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),console.log(e.t0);case 23:e.next=26;break;case 25:"Token invalid"===r.msg&&n(W());case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(0),console.log(e.t1);case 31:case"end":return e.stop()}}),e,null,[[0,28],[10,20]])})));return function(t){return e.apply(this,arguments)}}()}({_id:t.product,qtyOrder:t.qtyOrder})))}))},children:Object(n.jsx)(Ze.a,{})})})]})})},tt=function(e,t){for(var c=0,n=0;n<t.length;n++)for(var a=0;a<e.length;a++)e[a]._id===t[n].product&&(c+=e[a].price*t[n].qtyOrder);return c},ct=function(e){var t=Object(a.useState)(0),c=Object(K.a)(t,2),r=c[0],s=c[1],o=Object(i.c)((function(e){return e.products})).products;return Object(a.useEffect)((function(){s(tt(o,e.products))}),[e,o]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{}),Object(n.jsx)("td",{}),Object(n.jsx)("td",{}),Object(n.jsx)("td",{}),Object(n.jsx)("td",{className:"text-right",children:Object(n.jsx)("strong",{children:"Total"})}),Object(n.jsx)("td",{className:"text-right",children:Object(n.jsxs)("strong",{children:["$ ",r]})})]})})},nt=function(){var e=Object(i.c)((function(e){return e.cart})),t=Object(i.c)((function(e){return e.action})).action,c=Object(i.b)(),r=Object(d.g)();return Object(a.useEffect)((function(){0===e.products.length&&r.replace("/products")}),[e,t,c,r]),Object(n.jsxs)("div",{children:[Object(n.jsx)(o.a,{className:"container mt-2 text-center",children:Object(n.jsx)("h4",{className:"text-muted",children:"Venta"})}),Object(n.jsx)(o.a,{className:"container mb-4",children:Object(n.jsxs)(le.a,{children:[Object(n.jsx)(je.a,{className:"col-12",children:Object(n.jsx)("div",{className:"main-box clearfix",children:Object(n.jsxs)(De.a,{responsive:"sm",className:"table user-list",children:[Object(n.jsx)(Ke,{}),0!==e.products.length&&Object(n.jsxs)("tbody",{data:e.products,children:[0!==e.products.length&&e.products.map((function(e){return Object(n.jsx)(et,{product:e},e._id)})),0!==e.products.length&&Object(n.jsx)(ct,{products:e.products})]})]})})}),0!==e.products.length&&Object(n.jsxs)(je.a,{className:"col-12",children:[Object(n.jsx)(l.b,{to:"/checkout",children:Object(n.jsxs)(te.a,{className:"btn",variant:"success",children:["Finalizar venta",Object(n.jsx)(Ye.a,{})]})}),Object(n.jsxs)(te.a,{className:"btn ml-2 ",variant:"danger",onClick:function(e){h.a.fire({title:"Desea cancelar la orden de venta?",showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar"}).then((function(t){t.value&&(e.preventDefault(),c(S()),r.replace("/products"))}))},children:["Cancelar venta ",Object(n.jsx)(Ze.a,{})]})]})]})})]})},at=(c(100),function(e,t){for(var c=[],n=0;n<t.length;n++)for(var a=0;a<e.length;a++)e[a]._id===t[n].product&&c.push({code:e[a].code,name:e[a].name,tradeMark:e[a].tradeMark,qty:t[n].qtyOrder,price:e[a].price,amountProduct:t[n].qtyOrder*e[a].price});return c}),rt=function(e){var t=e.qtyProductsOrder;return Object(n.jsxs)("h4",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(n.jsx)("span",{className:"text-muted",children:"Listado de productos"}),Object(n.jsx)("span",{className:"badge badge-secondary badge-pill",children:t})]})},st=function(e){var t=e.product,c=Object(i.c)((function(e){return e.products})).products,r=Object(a.useState)(),s=Object(K.a)(r,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){0!==c.length&&l(c.filter((function(e){return e._id===t.product&&e}))[0])}),[c,t]),Object(n.jsx)("li",{className:"list-group-item d-flex justify-content-between lh-condensed",children:o&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("h6",{className:"my-0",children:o.name}),Object(n.jsx)("small",{className:"text-muted",children:o.tradeMark})]}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{className:"text-muted",children:["$ ",o.price]}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{className:"text-muted float-right",children:t.qtyOrder})]})]})})},ot=function(e){var t=e.total;return Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(n.jsx)("span",{children:"Total"}),Object(n.jsxs)("strong",{children:["$ ",t]})]})},it={fullName:"",address:"",email:"",paymentMethod:"",card:"",expiredDate:"",date:"",cvv:"",totalAmount:"",nameFullCard:""},lt=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.cart})),c=Object(i.c)((function(e){return e.auth})).uid,r=Object(i.c)((function(e){return e.action})).action,s=Object(i.c)((function(e){return e.products})).products,l=Object(d.g)(),u=Object(a.useState)(it),j=Object(K.a)(u,2),b=j[0],m=j[1],h=Object(a.useState)(""),p=Object(K.a)(h,2),x=p[0],O=p[1],f=Object(a.useState)(""),v=Object(K.a)(f,2),y=v[0],k=v[1],N=Object(a.useState)(!1),C=Object(K.a)(N,2),w=C[0],_=C[1],D=Object(a.useState)(),E=Object(K.a)(D,2),T=E[0],L=E[1],P=b.fullName,S=b.address,I=b.email,q=b.paymentMethod,F=b.card,U=b.expiredDate,B=(b.date,b.cvv),V=(b.totalAmount,b.nameFullCard),G=function(e){var t=e.target;m(Object(ne.a)(Object(ne.a)({},b),{},Object(ce.a)({},t.name,t.value)))},M=function(e){var t=e.target;""===t.value&&m(Object(ne.a)(Object(ne.a)({},b),{},Object(ce.a)({},t.name,t.value))),/^([0-9]*)$/.test(t.value)&&m(Object(ne.a)(Object(ne.a)({},b),{},Object(ce.a)({},t.name,t.value)))};return Object(a.useEffect)((function(){""!==t.user&&(L(t.products),s&&(b.totalAmount=tt(s,t.products))),r&&(e(g()),l.replace("/products"))}),[r,s,t,c,b,e,l]),Object(n.jsx)(o.a,{className:"mt-4",children:Object(n.jsxs)(le.a,{children:[Object(n.jsxs)(je.a,{className:"col-md-5 order-md-2 mb-4",children:[T&&Object(n.jsx)(rt,{qtyProductsOrder:T.length}),Object(n.jsxs)("ul",{className:"list-group mb-3",children:[T&&T.map((function(e){return Object(n.jsx)(st,{product:e},e._id)})),0!==b.totalAmount&&""!==b.totalAmount&&Object(n.jsx)(ot,{total:parseInt(b.totalAmount)})]})]}),Object(n.jsxs)(je.a,{className:"col-md-6",children:[Object(n.jsx)("h4",{className:"mb-3",children:"Datos del cliente"}),Object(n.jsxs)(ee.a,{noValidate:!0,validated:w,onSubmit:function(t){t.preventDefault();var c,n=t.currentTarget;if(!1===n.checkValidity())t.preventDefault(),t.stopPropagation();else if(!0===n.checkValidity())if(t.preventDefault(),"cash"!==b.paymentMethod){var a=(c=b.expiredDate,parseInt(c[0]+c[1])<=0||parseInt(c[0]+c[1])>=13?{msg:"Debe ingresar un mes v\xe1lido",valid:"true"}:parseInt(c[2]+c[3])<(new Date).getFullYear()-2e3?{msg:"Tarjeta vencida",valid:"true"}:parseInt(c[2]+c[3])>(new Date).getFullYear()-2e3?{msg:"Tarjeta v\xe1lida",valid:"false"}:parseInt(c[2]+c[3])===(new Date).getFullYear()-2e3&&c[0]+c[1]<(new Date).getMonth()+1?{msg:"Tarjeta vencida",valid:"true"}:{msg:"Tarjeta v\xe1lida",valid:"false"}),r=a.msg;k(a.valid),O(r),"false"===y&&(b.products=at(s,T),b.date=new Date,e(A(b)))}else k("false"),b.products=at(s,T),b.date=new Date,e(A(b));_(!0)},children:[Object(n.jsxs)(le.a,{children:[Object(n.jsxs)(je.a,{className:"col-10 mb-3",children:[Object(n.jsxs)(ee.a.Group,{controlId:"validationCustom01",children:[Object(n.jsx)(ee.a.Label,{children:Object(n.jsx)("h6",{className:"mb-1",children:"Nombre completo"})}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"fullName",onChange:G,placeholder:"Nombre",type:"text",required:!0,value:P,minLength:3}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe ingresar un nombre v\xe1lido!"})]}),Object(n.jsxs)(ee.a.Group,{controlId:"validationCustom02",children:[Object(n.jsx)(ee.a.Label,{children:Object(n.jsx)("h6",{className:"mb-1",children:"Correo de facturaci\xf3n"})}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"email",onChange:G,placeholder:"Correo electr\xf3nico",type:"email",value:I})]}),Object(n.jsxs)(ee.a.Group,{controlId:"validationCustom03",children:[Object(n.jsx)(ee.a.Label,{children:Object(n.jsx)("h6",{className:"mb-1",children:"Direcci\xf3n cliente"})}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"address",onChange:G,placeholder:"Direcci\xf3n",type:"text",required:!0,value:S,minLength:3}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe ingresar una direci\xf3n!"})]})]}),Object(n.jsx)(je.a,{className:"col-8 mb-3",children:Object(n.jsxs)(ee.a.Group,{controlId:"validationCustom04",children:[Object(n.jsxs)(ee.a.Control,{required:!0,as:"select",type:"select",name:"paymentMethod",onChange:G,onSelect:G,value:q,children:[Object(n.jsx)("option",{value:"",children:"Seleccionar una opci\xf3n"}),[{label:"Efectivo",value:"cash"},{label:"D\xe9bito",value:"debitCard"},{label:"Cr\xe9dito",value:"creditCard"}].map((function(e){return Object(n.jsx)("option",{value:e.value,children:e.label},e.value)}))]}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe seleccionar un m\xe9todo de pago."})]})})]}),("debitCard"===q||"creditCard"===q)&&Object(n.jsxs)(le.a,{children:[Object(n.jsx)(je.a,{className:"col-10 mb-3",children:Object(n.jsxs)(ee.a.Group,{controlId:"validationCustom05",children:[Object(n.jsx)(ee.a.Label,{children:Object(n.jsx)("h6",{className:"mb-1",children:"Nombre completo tarjeta de credito"})}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"nameFullCard",onChange:G,placeholder:"Nombre",type:"text",required:!0,value:V,minLength:3}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"Debe ingresar un nombre v\xe1lido!"})]})}),Object(n.jsx)(je.a,{className:"col-8 mb-3",children:Object(n.jsxs)(ee.a.Group,{controlId:"validationCustom06",children:[Object(n.jsx)(ee.a.Label,{children:Object(n.jsx)("h6",{className:"mb-1",children:"N\xfamero de tarjeta de credito"})}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"card",onChange:M,placeholder:"XXXX-XXXX-XXXX-XXXX",type:"text",required:!0,value:F,minLength:16,maxLength:16}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"N\xfamero invalido!"})]})}),Object(n.jsxs)(le.a,{className:"ml-1",children:[Object(n.jsx)(je.a,{className:"col-4 mb-3",children:Object(n.jsxs)(ee.a.Group,{controlId:"validationCustom07",children:[Object(n.jsx)(ee.a.Label,{children:Object(n.jsx)("h6",{className:"mb-1",children:"Vencimiento"})}),Object(n.jsx)(ee.a.Control,{className:" ".concat("true"===y?"form-control is-invalid":"form-control"),name:"expiredDate",onChange:M,placeholder:"MMAA",type:"text",value:U,minLength:4,maxLength:4,required:!0,isInvalid:y}),"true"===y?Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:x}):""]})}),Object(n.jsx)(je.a,{className:"col-3 mb-3",children:Object(n.jsxs)(ee.a.Group,{controlId:"validationCustom08",children:[Object(n.jsx)(ee.a.Label,{children:Object(n.jsx)("h6",{className:"mb-1",children:"CVV"})}),Object(n.jsx)(ee.a.Control,{className:"form-control",name:"cvv",onChange:M,placeholder:"***",type:"password",required:!0,value:B,minLength:3,maxLength:3}),Object(n.jsx)(ee.a.Control.Feedback,{children:"V\xe1lido!"}),Object(n.jsx)(ee.a.Control.Feedback,{type:"invalid",children:"N\xfamero invalido!"})]})})]})]}),Object(n.jsx)(te.a,{variant:"success",className:"btn",type:"submit",children:"Confrimar venta"})]})]})]})})},dt=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(_e,{}),Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/products",component:ye}),Object(n.jsx)(d.b,{exact:!0,path:"/product/detail/:id",component:ue}),Object(n.jsx)(d.b,{exact:!0,path:"/product/:id",component:Me}),Object(n.jsx)(d.b,{exact:!0,path:"/shop",component:nt}),Object(n.jsx)(d.b,{exact:!0,path:"/checkout",component:lt}),Object(n.jsx)(d.a,{to:"/products"})]})]})},ut=c(54),jt=c(3),bt=c.n(jt),mt=function(e){var t=e.isAuthnticated,c=e.component,a=Object(ut.a)(e,["isAuthnticated","component"]);return Object(n.jsx)(d.b,Object(ne.a)(Object(ne.a)({},a),{},{component:function(e){return t?Object(n.jsx)(c,Object(ne.a)({},e)):Object(n.jsx)(d.a,{to:"/login"})}}))};mt.prototypes={isAuthnticated:bt.a.bool.isRequired,Component:bt.a.func.isRequired};var ht=function(e){var t=e.isAuthenticated,c=e.component,a=Object(ut.a)(e,["isAuthenticated","component"]);return Object(n.jsx)(d.b,Object(ne.a)(Object(ne.a)({},a),{},{component:function(e){return t?Object(n.jsx)(d.a,{to:"/"}):Object(n.jsx)(c,Object(ne.a)({},e))}}))},pt=function(){var e=Object(i.c)((function(e){return e.auth})),t=e.checking,c=e.position,r=e.uid,s=Object(i.b)();return Object(a.useEffect)((function(){s(function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("auth/renew");case 2:return c=e.sent,e.next=5,c.json();case 5:(n=e.sent).ok?(localStorage.setItem("token",n.token),localStorage.setItem("token-init-date",Date()),t(R({uid:n.uid,firstName:n.firstName,lastName:n.lastName,position:n.employeePosition})),console.log(n),"gerente"===n.employeePosition?(t(G()),t(F())):"vendedor"===n.employeePosition&&t(L()),t(N())):"Token invalid"===n.msg?(t(H()),t(W())):t(H());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[s]),t?Object(n.jsx)(o.a,{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",margin:"auto"},children:Object(n.jsx)(Z,{})}):Object(n.jsx)(l.a,{children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(ht,{exact:!0,path:"/login",component:re,isAuthenticated:!!r}),"vendedor"===c?Object(n.jsx)(mt,{path:"/",component:dt,isAuthnticated:!!r}):Object(n.jsx)(mt,{path:"/",component:Qe,isAuthnticated:!!r}),Object(n.jsx)(d.a,{to:"/login"})]})})},xt=c(32),Ot=c(67),ft={action:!1},vt={checking:!0},gt={user:"",products:[],_id:""},yt=c(37),kt={products:[]},Nt={sales:[]},Ct={users:[]},wt=Object(xt.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.authLogin:return Object(ne.a)(Object(ne.a)({},e),{},{checking:!1},t.payload);case p.authCheckingFinish:return Object(ne.a)(Object(ne.a)({},e),{},{checking:!1});case p.authLogout:return{checking:!1};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.userCheckingList:return Object(ne.a)(Object(ne.a)({},e),{},{users:t.payload});case p.userAddNew:return Object(ne.a)(Object(ne.a)({},e),{},{users:[].concat(Object(yt.a)(e.users),[t.payload])});case p.userUpdated:return Object(ne.a)(Object(ne.a)({},e),{},{users:e.users.map((function(e){return e._id===t.payload._id?t.payload:e}))});case p.userDeleted:return Object(ne.a)(Object(ne.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.payload}))});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.productCheckingList:return Object(ne.a)(Object(ne.a)({},e),{},{products:t.payload});case p.productAddNew:return Object(ne.a)(Object(ne.a)({},e),{},{products:[].concat(Object(yt.a)(e.products),[t.payload])});case p.productUpdated:case p.productUpdatedCartRestQty:return Object(ne.a)(Object(ne.a)({},e),{},{products:e.products.map((function(e){return e._id===t.payload._id?t.payload:e}))});case p.productDeleted:return Object(ne.a)(Object(ne.a)({},e),{},{products:e.products.filter((function(e){return e._id!==t.payload}))});default:return e}},action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.confirmAction:return Object(ne.a)(Object(ne.a)({},e),{},{action:!0});case p.removeAction:return Object(ne.a)(Object(ne.a)({},e),{},{action:!1});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.cartChecking:return Object(ne.a)(Object(ne.a)({},e),t.payload);case p.updateCart:return Object(ne.a)(Object(ne.a)({},e),{},{cart:e.cart.map((function(e){return e._id===t.payload._id?t.payload:e}))});case p.cartDeleted:return Object(ne.a)(Object(ne.a)({},e),{},{user:"",products:[],_id:""});default:return e}},sales:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.saleCheckingList:return Object(ne.a)(Object(ne.a)({},e),{},{sales:t.payload});case p.saleNew:return Object(ne.a)(Object(ne.a)({},e),{},{sales:[].concat(Object(yt.a)(e.sales),[t.payload])});case p.saleChangeState:return Object(ne.a)(Object(ne.a)({},e),{},{sales:e.sales.map((function(e){return e._id===t.payload._id?t.payload:e}))});default:return e}}}),_t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||xt.d,Dt=Object(xt.e)(wt,_t(Object(xt.a)(Ot.a))),Et=function(){return Object(n.jsx)(i.a,{store:Dt,children:Object(n.jsx)(pt,{})})};s.a.render(Object(n.jsx)(Et,{}),document.getElementById("root"))},18:function(e,t,c){},34:function(e,t,c){},96:function(e,t,c){},99:function(e,t,c){}},[[101,1,2]]]);
//# sourceMappingURL=main.73db2391.chunk.js.map